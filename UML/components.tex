\documentclass{standalone}
\usepackage[utf8]{inputenc}
\usepackage{polski}


\usepackage{tikz}
	\usetikzlibrary{shapes}
	\usetikzlibrary{arrows}
	\usetikzlibrary{matrix}

	\makeatletter
		\pgfdeclareshape{umlcomponent}
		{
			\inheritsavedanchors[from=rectangle split]
			\inheritbackgroundpath[from=rectangle split]
			\inheritanchorborder[from=rectangle split]
			\inheritanchor[from=rectangle split]{center}
			\inheritanchor[from=rectangle split]{north}
			\inheritanchor[from=rectangle split]{north east}
			\inheritanchor[from=rectangle split]{north west}
			\inheritanchor[from=rectangle split]{south}
			\inheritanchor[from=rectangle split]{south east}
			\inheritanchor[from=rectangle split]{south west}
			\inheritanchor[from=rectangle split]{west}
			\inheritanchor[from=rectangle split]{east}
			\foregroundpath{
				\northeast \pgf@xa=\pgf@x \pgf@ya=\pgf@y
				\advance\pgf@xa by-2pt
				\advance\pgf@ya by-2pt
				\advance\pgf@xa by-2pt
				\advance\pgf@xa by-2pt
				\advance\pgf@ya by-1pt
				\pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by2pt
				\advance\pgf@xa by2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by-1pt
				\advance\pgf@ya by-2pt
				\advance\pgf@ya by-1pt
				\advance\pgf@ya by-2pt
				\advance\pgf@ya by-1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by-2pt
				\advance\pgf@xa by-2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by-1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by-1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by-2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by-2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by-1pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@ya by-2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\advance\pgf@xa by-2pt
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
			}
		}
		\tikzstyle{umlcomponent}=[
				shape = umlcomponent,
				rectangle split parts = 2,
				rectangle split empty part height = 32pt,
				draw = black,
				fill = yellow!16,
				inner xsep = 16pt,
			]
		\pgfdeclareshape{umlnote}
		{
			\inheritsavedanchors[from=rectangle]
			\inheritanchorborder[from=rectangle]
			\inheritanchor[from=rectangle]{center}
			\inheritanchor[from=rectangle]{north}
			\inheritanchor[from=rectangle]{north east}
			\inheritanchor[from=rectangle]{north west}
			\inheritanchor[from=rectangle]{south}
			\inheritanchor[from=rectangle]{south east}
			\inheritanchor[from=rectangle]{south west}
			\inheritanchor[from=rectangle]{west}
			\inheritanchor[from=rectangle]{east}
			\backgroundpath{
				\southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
				\northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
				\pgf@xc=\pgf@xb \advance\pgf@xc by-5pt
				\pgf@yc=\pgf@yb \advance\pgf@yc by-5pt
				\pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
				\pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
				\pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yb}}
				\pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
				\pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
				\pgfpathclose
				\pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yb}}
				\pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
				\pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
				\pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
			}
		}
		\tikzstyle{umlnote}=[
				shape = umlnote,
				draw = black,
				fill = blue!16,
				inner xsep = 4pt,
				inner ysep = 4pt,
				execute at begin node = \tiny
			]
		\tikzstyle{umlcomponentport}=[
				shape = rectangle,
				draw = black,
				fill = yellow!16,
				minimum  width = 8pt,
				minimum height = 8pt,
			]
		\tikzstyle{umlprovidedinterface}=[
				shape = circle,
				draw = black,
			]
	\makeatother


\begin{document}
	\begin{tikzpicture}

		\matrix [column sep = 64pt, row sep = 64pt]
		{
			\node[umlcomponent](integer){integer};&
			\coordinate[umlprovidedinterface](integer-interface);&
			\node[umlcomponent](ballot){ballot};&
			\coordinate[umlprovidedinterface](ballot-interface);&
			\node[umlcomponent](webclient){webclient};&
			\coordinate[umlprovidedinterface](webclient-interface);&
			\\
			\node[umlnote,text width=64pt](integer-note)
			{
				Biblioteka \texttt{C++} udostępniająca podstawowe operacje na liczbach całkowitych dowolnej precyzji.
			};&
			&
			\node[umlnote,text width=64pt](ballot-note)
			{
				Serwer pełniący funkcje urny wyborczej. Jego zadaniem jest zbieranie głosów bez jakiejkolwiek wiedzy na temat głosów i głosujących.
			};&
			\node[umlnote,text width=64pt](ballot-interface-note)
			{
				Interfejs komunikacji z serwerem \texttt{ballot}, zaimplementowany jako interfejs \texttt{www} operujący na komunikatach \texttt{YAML},\texttt{JSON},\texttt{JSONP}.
			};&
			\coordinate[umlprovidedinterface](generator-interface);&
			\node[umlnote,text width=64pt](webclient-note)
			{
				Serwer \texttt{www} stanowiący warstwę kliencką aplikacji.
			};&
			\node[umlnote,text width=64pt](webclient-interface-note)
			{
				Końcowy intefejs \texttt{www}, zapewniający interakcje z użytkownikami.
			};\\
			\node[umlnote,text width=64pt](integer-interface-note)
			{
				Plik nagłówkowy \texttt{Integer.hpp} definiujący wszystkie funkcje jako \texttt{inline}.
			};&
			&
			&
			&
			\node[umlcomponent](generator){generator};&
			\node[umlnote,text width=64pt](generator-note)
			{
				Serwer stanowiący rozszerzenie \texttt{webclient}, umożliwiający generowanie kluczy oraz kart do głosowania.
			};&
			\node[umlnote,text width=64pt](generator-interface-note)
			{
				Interfejs komunikacji z serwerem \texttt{generator}, zaimplementowany jako interfejs \texttt{www} operujący na komunikatach \texttt{YAML},\texttt{JSON},\texttt{JSONP}.
			};\\
		};

		\coordinate[umlcomponentport] (ballot-east-port) at (ballot.east);
		\coordinate[umlcomponentport] (generator-north-port) at (generator.north){};
		\coordinate[umlcomponentport] (webclient-west-port) at (webclient.west){};
		\coordinate[umlcomponentport] (webclient-south-port) at (webclient.south){};
		\coordinate[umlcomponentport] (webclient-east-port) at (webclient.east){};

		\draw (integer.east) -- (integer-interface);
		\draw (ballot-east-port) -- (ballot-interface);
		\draw (generator-north-port) -- (generator-interface);
		\draw (webclient-east-port) -- (webclient-interface);

		\draw[-(] (ballot.west) -- (integer-interface);
		\draw[-(] (generator.west) -| (integer-interface);
		\draw[-(] (webclient-west-port) -- (ballot-interface);
		\draw[-(] (webclient-south-port) -- (generator-interface);

		\draw[dashed] (integer) -- (integer-note);
		\draw[dashed] (integer-interface) -- (integer-interface-note);
		\draw[dashed] (ballot) -- (ballot-note);
		\draw[dashed] (ballot-interface) -- (ballot-interface-note);
		\draw[dashed] (webclient) -- (webclient-note);
		\draw[dashed] (webclient-interface) -- (webclient-interface-note);
		\draw[dashed] (generator) -- (generator-note);
		\draw[dashed] (generator-interface) -- (generator-interface-note);

		\draw (8,8) node[anchor=north west,align=right,text width=230,fill=yellow!16,inner sep=10]
		{
			{\fontsize{11}{1}\selectfont\hfill Piotr Majkrzak, Szymon Nosal\\}
			\vspace{8pt}
			{\fontsize{23}{1}\fontshape{sl}\selectfont\hfill głosowanie internetowe\\}
			{\fontsize{21}{1}\fontshape{sl}\selectfont\color{black!64}\hfill diagram komponentów\\}
			{\fontsize{12}{1}\fontshape{sl}\selectfont\color{black!64}\hfill Kraków, \today}
		};

	\end{tikzpicture}
\end{document}